<app-progress-spinner [options]="loading"> </app-progress-spinner>
<!--content-->
<div class="content">
  <p class="font-600 color-highlight mb-0">بازنشانی حساب</p>
  <!--begin::Title-->
  <h1 class="font-30"> {{'AUTH.FORGOT.TITLE' | translate}}</h1>
  <p>
    {{'AUTH.FORGOT.DESCSMS' | translate}}
  </p>
  <!--end::Title-->
  <!--begin::Form-->
  <form *ngIf="forgetState==='sms'" class="form fv-plugins-bootstrap fv-plugins-framework" novalidate="novalidate"
    #vformBySms="ngForm" (ngSubmit)="onActionSubmitOrderCodeBySms()" id="kt_login_forgot_form" [ngStyle]="{
      display: errorState === errorStates.NoError ? 'none' : 'block'
    }">


    <!--Mobile Field-->
    <div class="input-style no-borders has-icon validate-field mb-4">
      <i class="fa fa-at"></i>
      <input type="text" [(ngModel)]="dataModelforgetPasswordBySms.mobile" name="dataModelforgetPasswordBySms.mobile"
        [disabled]=" !formInfo.buttonSubmittedEnabled" #Mobile class="form-control validate-name"
        id="dataModelforgetPasswordBySms.mobile" placeholder="{{'AUTH.FORGOT.MOBILE' | translate}}" autocomplete="off"
        minlength="5" maxlength="50" required>
      <label for="dataModelforgetPasswordBySms.mobile" class="color-highlight font-11 font-500">{{'AUTH.FORGOT.MOBILE' |
        translate}}</label>
      <i class="fa fa-times disabled invalid color-red-dark"></i>
      <i class="fa fa-check disabled valid color-green-dark"></i>
      <em>(ضروری)</em>
      <mat-error *ngIf="Mobile.errors?.required">
        {{'AUTH.FORGOT.MOBILE' | translate}} <strong>{{'MESSAGE.required' | translate}}</strong>
      </mat-error>
    </div>
    <!--captchaText Field-->
    <img src="{{captchaModel.image}}" (click)="onCaptchaOrder()" class="mb-3" alt="">
    <mat-icon matSuffix (click)="onCaptchaOrder()">refresh</mat-icon>
    <div class="input-style no-borders has-icon validate-field mb-4">
      <i class="fa fa-quote-left"></i>
      <input [(ngModel)]="dataModelforgetPasswordBySms.captchaText" name="dataModelforgetPasswordBySms.captchaText"
        #captchaText id="dataModelforgetPasswordBySms.captchaText" [disabled]=" !formInfo.buttonSubmittedEnabled"
        type="text" class="form-control validate-name" placeholder="{{'AUTH.INPUT.CAPTCHACODE' | translate}}"
        autocomplete="off" required>
      <label for="dataModelforgetPasswordBySms.captchaText" class="color-highlight">{{'AUTH.INPUT.CAPTCHACODE' |
        translate}}</label>
      <i class="fa fa-times disabled invalid color-red-dark"></i>
      <i class="fa fa-check disabled valid color-green-dark"></i>
      <em>(ضروری)</em>
      <mat-error *ngIf="captchaText.errors?.required">
        {{'AUTH.INPUT.CAPTCHACODE' | translate}} <strong>{{'MESSAGE.required' | translate}}</strong>
      </mat-error>
    </div>
    <button type="submit" [disabled]="vformBySms.invalid || !formInfo.buttonSubmittedEnabled" style="width: 100%;"
      class="btn btn-full btn-l font-600 font-13 gradient-highlight mt-4 rounded-s">
      {{'AUTH.FORGOT.SEND_PIN_CODE' | translate}}
    </button>

    <br>
    <p (click)="changeforgetState('email')">{{'MESSAGE.Reminders.by.email' | translate}}</p>
    <div></div>
  </form>
  <!--end::Form-->
  <!--begin::Form-->
  <form *ngIf="forgetState==='email'" class="form fv-plugins-bootstrap fv-plugins-framework" novalidate="novalidate"
    #vformByEmail="ngForm" (ngSubmit)="onActionSubmitOrderCodeByEmail()" id="kt_login_forgot_form" [ngStyle]="{
      display: errorState === errorStates.NoError ? 'none' : 'block'
    }">
    <!--email Field-->
    <div class="input-style no-borders has-icon validate-field mb-4">
      <i class="fa fa-at"></i>
      <input type="email" [(ngModel)]="dataModelforgetPasswordByEmail.email" name="dataModelforgetPasswordByEmail.email"
        [disabled]=" !formInfo.buttonSubmittedEnabled" #Mobile class="form-control validate-name"
        id="dataModelforgetPasswordByEmail.email" placeholder="{{'AUTH.FORGOT.EMAIL' | translate}}" autocomplete="off"
        minlength="5" maxlength="50" required>
      <label for="dataModelforgetPasswordByEmail.email" class="color-highlight font-11 font-500">{{'AUTH.FORGOT.EMAIL' |
        translate}}</label>
      <i class="fa fa-times disabled invalid color-red-dark"></i>
      <i class="fa fa-check disabled valid color-green-dark"></i>
      <em>(ضروری)</em>
      <mat-error *ngIf="Mobile.errors?.required">
        {{'AUTH.FORGOT.EMAIL' | translate}} <strong>{{'MESSAGE.required' | translate}}</strong>
      </mat-error>
    </div>
    <!--captchaText Field-->
    <img src="{{captchaModel.image}}" (click)="onCaptchaOrder()" class="mb-3" alt="">
    <mat-icon matSuffix (click)="onCaptchaOrder()">refresh</mat-icon>
    <div class="input-style no-borders has-icon validate-field mb-4">
      <i class="fa fa-quote-left"></i>
      <input [(ngModel)]="dataModelforgetPasswordByEmail.captchaText" name="dataModelforgetPasswordByEmail.captchaText"
        #captchaText id="dataModelforgetPasswordByEmail.captchaText" [disabled]=" !formInfo.buttonSubmittedEnabled"
        type="text" class="form-control validate-name" placeholder="{{'AUTH.INPUT.CAPTCHACODE' | translate}}"
        autocomplete="off" required>
      <label for="dataModelforgetPasswordByEmail.captchaText" class="color-highlight">{{'AUTH.INPUT.CAPTCHACODE' |
        translate}}</label>
      <i class="fa fa-times disabled invalid color-red-dark"></i>
      <i class="fa fa-check disabled valid color-green-dark"></i>
      <em>(ضروری)</em>
      <mat-error *ngIf="captchaText.errors?.required">
        {{'AUTH.INPUT.CAPTCHACODE' | translate}} <strong>{{'MESSAGE.required' | translate}}</strong>
      </mat-error>
    </div>
    <button type="submit" [disabled]="vformByEmail.invalid || !formInfo.buttonSubmittedEnabled" style="width: 100%;"
      class="btn btn-full btn-l font-600 font-13 gradient-highlight mt-4 rounded-s">
      {{'AUTH.FORGOT.SEND_PIN_CODE' | translate}}
    </button>
    <br>
    <p (click)="changeforgetState('sms')">{{'MESSAGE.Reminder.by.SMS' | translate}}</p>
    <div></div>
  </form>
  <!--end::Form-->
  <!--begin::Form-->
  <form *ngIf="forgetState==='entrycode'" class="form fv-plugins-bootstrap fv-plugins-framework" novalidate="novalidate"
    #vformEntryCode="ngForm" (ngSubmit)="onActionSubmitEntryPinCode()" id="kt_login_forgot_form" [ngStyle]="{
      display: errorState === errorStates.NoError ? 'none' : 'block'
    }">
    <!--activateCode Field-->
    <div class="input-style no-borders has-icon validate-field mb-4">
      <i class="fa fa-at"></i>
      <input [(ngModel)]="dataModelforgetPasswordEntryPinCode.activateCode"
        name="dataModelforgetPasswordEntryPinCode.activateCode" [disabled]=" !formInfo.buttonSubmittedEnabled"
        #ActivateCode type="text" autocomplete="off" placeholder=" {{'AUTH.FORGOT.SEND_PIN_CODE' | translate}}"
        class="form-control validate-name" id="dataModelforgetPasswordEntryPinCode.activateCode" minlength="3"
        maxlength="5" required />
      <label for="dataModelforgetPasswordEntryPinCode.activateCode" class="color-highlight font-11 font-500">
        {{'AUTH.FORGOT.PIN_CODE' | translate}}</label>
      <i class="fa fa-times disabled invalid color-red-dark"></i>
      <i class="fa fa-check disabled valid color-green-dark"></i>
      <em>(ضروری)</em>
      <mat-error *ngIf="ActivateCode.errors?.required">
        {{'AUTH.FORGOT.SEND_PIN_CODE' | translate}} <strong>{{'MESSAGE.required' | translate}}</strong>
      </mat-error>
    </div>




    <mat-form-field class="ntk-full-width">
      <mat-label class="form-label"> {{'AUTH.FORGOT.PASSWORD' | translate}}</mat-label>
      <input matInput [(ngModel)]="dataModelforgetPasswordEntryPinCode.newPassword"
        name="dataModelforgetPasswordEntryPinCode.newPassword" [disabled]=" !formInfo.buttonSubmittedEnabled"
        #newPassword type="password"
        class="form-control form-control-solid h-auto py-7 px-6 rounded-lg font-size-h6 input-ltr-center"
        autocomplete="off" placeholder=" {{'AUTH.FORGOT.PASSWORD' | translate}}" minlength="3" maxlength="50"
        required />
      <mat-icon matSuffix *ngIf="dataModelforgetPasswordEntryPinCode.newPassword" matSuffix mat-icon-button
        aria-label="Clear" (click)="dataModelforgetPasswordEntryPinCode.newPassword = ''">
        close</mat-icon>
      <mat-icon matSuffix>mode_edit</mat-icon>
      <mat-hint align="end">{{ newPassword.value.length }} / 50</mat-hint>
      <mat-error *ngIf="newPassword.errors?.required">
        {{'AUTH.FORGOT.PASSWORD' | translate}} <strong>{{'MESSAGE.required' | translate}}</strong>
      </mat-error>
    </mat-form-field>
    <app-password-strength [passwordToCheck]="dataModelforgetPasswordEntryPinCode.newPassword"
      (passwordStrength)="passwordValid($event)"></app-password-strength>
    <mat-form-field class="ntk-full-width">
      <mat-label class="form-label"> {{'AUTH.FORGOT.CONFIRM_PASSWORD' | translate}}</mat-label>
      <input matInput [(ngModel)]="RePasswordModel" name="RePasswordModel"
        [disabled]=" !formInfo.buttonSubmittedEnabled" #RePassword type="password"
        class="form-control form-control-solid h-auto py-7 px-6 rounded-lg font-size-h6 input-ltr-center"
        autocomplete="off" placeholder=" {{'AUTH.FORGOT.CONFIRM_PASSWORD' | translate}}" minlength="3" maxlength="50"
        required />
      <mat-icon matSuffix *ngIf="RePasswordModel" matSuffix mat-icon-button aria-label="Clear"
        (click)="RePasswordModel = ''">
        close</mat-icon>
      <mat-icon matSuffix>mode_edit</mat-icon>
      <mat-hint align="end">{{ RePassword.value.length }} / 50</mat-hint>
      <mat-error *ngIf="RePassword.errors?.required">
        {{'AUTH.FORGOT.CONFIRM_PASSWORD' | translate}} <strong>{{'MESSAGE.required' | translate}}</strong>
      </mat-error>
      <mat-error *ngIf=" RePassword.value!==newPassword.value">
        {{'MESSAGE.Password_and_password_confirmation_are_different' | translate}}
      </mat-error>
    </mat-form-field>
    <!--captchaText Field-->
    <img src="{{captchaModel.image}}" (click)="onCaptchaOrder()" class="mb-3" alt="">
    <mat-icon matSuffix (click)="onCaptchaOrder()">refresh</mat-icon>
    <mat-form-field class="ntk-full-width">
      <mat-label class="form-label"> {{'AUTH.INPUT.CAPTCHACODE' | translate}}</mat-label>
      <input matInput [(ngModel)]="dataModelforgetPasswordEntryPinCode.captchaText"
        name="dataModelforgetPasswordEntryPinCode.captchaText" [disabled]=" !formInfo.buttonSubmittedEnabled"
        #captchaText type="number"
        class="form-control form-control-solid h-auto py-7 px-6 rounded-lg font-size-h6 input-ltr-center"
        autocomplete="off" placeholder=" {{'AUTH.INPUT.CAPTCHACODE' | translate}}" required />
      <mat-icon matSuffix *ngIf="dataModelforgetPasswordEntryPinCode.captchaText" matSuffix mat-icon-button
        aria-label="Clear" (click)="dataModelforgetPasswordEntryPinCode.captchaText = ''">
        close</mat-icon>
      <mat-icon matSuffix>mode_edit</mat-icon>
      <mat-error *ngIf="captchaText.errors?.required">
        {{'AUTH.INPUT.CAPTCHACODE' | translate}} <strong>{{'MESSAGE.required' | translate}}</strong>
      </mat-error>
    </mat-form-field>

    <p (click)="changeforgetState('email')">{{'MESSAGE.Resend_the_recovery_code' | translate}}</p>
    <div></div>
  </form>
  <!--end::Form-->
  <!--end::Form-->



  <ng-template #formError let-control="control" let-message="message" let-validation="validation">
    <ng-container *ngIf="control.hasError(validation) && (control.dirty || control.touched)">
      <div class="fv-plugins-message-container">
        <div class="fv-help-block">
          {{ message }}
        </div>
      </div>
    </ng-container>
  </ng-template>


  <a href="#" data-back-button class="btn btn-full btn-l font-600 font-13 gradient-highlight mt-4 rounded-s">ارسال
    ایمیل</a>

  <div class="row pt-3 mb-0">
    <div class="col-6 text-start">
      <a href="#" [routerLink]="['/auth/singin']" class="color-highlight">{{'AUTH.REGISTER.RETURN_TO_LOGIN' |
        translate}}</a>
    </div>
    <div class="col-6 text-end">
      <a href="#" [routerLink]="['/auth/singup']" class="color-highlight">{{ 'AUTH.GENERAL.SIGNUP_BUTTON' | translate
        }}</a>
    </div>
  </div>

</div>
<!--content-->