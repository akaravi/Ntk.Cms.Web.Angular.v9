<app-progress-spinner [options]="loading"> </app-progress-spinner>
<div class="card card-style">
    <div class="content mb-0">
        <p class="mb-0 color-highlight font-600 font-12">
            حساب کاربری خود را ویرایش کنید
        </p>
        <h4>اطلاعات</h4>
        <h4>اطلاعات اولیه</h4>
        <p>
            اطلاعات عمومی که در بالای کارت شما در صفحه نمایه شما نشان داده می شود. این
            فقط یک صفحه ساختگی است.
        </p>
    </div>
</div>
<app-cms-html-notice [svg]="'assets/media/svg/icons/General/Notifications1.svg'">
    <h4> {{'TITLE.Add_help' | translate}}</h4>
    {{'TITLE.In_this_section_you_can_create_a_new_guide' | translate}}
</app-cms-html-notice>
<br>
<form (ngSubmit)="onFormSubmit()" #vform="ngForm">
    <div class="ntk-cms-html-card-header">
        <!--begin:::::::::::::::::::::::::::::::::::::::::cms-header-->
        {{ formInfo.formTitle }}
        <!--end:::::::::::::::::::::::::::::::::::::::::cms-header-->
    </div>
    <div class="ntk-cms-html-card-body">
        <!--begin:::::::::::::::::::::::::::::::::::::::::cms-body-->
        <mat-vertical-stepper (selectionChange)="onStepClick($event,stepper)" #stepper>
            <mat-step label="{{'TITLE.REQUIRED_INFORMATION' | translate}}" state="main">
                <!-- RecordStatus Field -->
                <app-cms-enum-record-status-selector *ngIf="fieldsInfo['recordStatus']?.accessWatchField"
                    [(model)]="dataModel.recordStatus" [optionDisabled]="false"
                    [optionLabel]="this.fieldsInfo['recordStatus']?.fieldTitle" [optionRequired]="true"
                    [optionSelectFirstItem]="true"></app-cms-enum-record-status-selector>


                <!-- LinkApplicationId Field -->
                <app-application-app-selector (optionChange)="onActionSelectApplication($event)"
                    [optionSelectForce]="this.dataModel.linkApplicationId" [(optionLoading)]="loading"
                    [optionPlaceholder]="this.translate.instant('TITLE.Application')"
                    [optionDisabled]="!fieldsInfo['linkApplicationId']?.accessAddField"></app-application-app-selector>
                <!-- Title Field -->
                <mat-form-field class="ntk-full-width" *ngIf="fieldsInfo['title']?.accessWatchField">
                    <mat-label>{{ fieldsInfo['title']?.fieldTitle }}</mat-label>
                    <input matInput [(ngModel)]="dataModel.title" [disabled]="!fieldsInfo['title']?.accessAddField"
                        name="dataModel.title" #Title type="text" placeholder="{{fieldsInfo['title']?.fieldTitle}}"
                        minlength="3" maxlength="100" required />
                    <mat-icon matSuffix *ngIf="dataModel.title && fieldsInfo['title']?.accessAddField" matSuffix
                        mat-icon-button aria-label="Clear" (click)="dataModel.title = ''">close</mat-icon>
                    <mat-icon *ngIf="fieldsInfo['title']?.accessAddField" matSuffix>mode_edit</mat-icon>
                    <mat-hint align="start">
                        <mat-icon matSuffix class="info-field-icon">info</mat-icon>
                        <strong class="info-field-text">{{fieldsInfo['title']?.fieldDescription}}</strong>
                    </mat-hint>
                    <mat-hint align="end">{{ Title.value.length }} / 100</mat-hint>
                    <mat-error *ngIf="Title.errors?.required">
                        {{ fieldsInfo['title']?.fieldTitle }} is <strong>{{'MESSAGE.required' | translate}}</strong>
                    </mat-error>
                </mat-form-field>
                <!-- Description Field -->
                <mat-form-field class="ntk-full-width" *ngIf="fieldsInfo['description']?.accessWatchField">
                    <mat-label>{{ fieldsInfo['description']?.fieldDescription }}</mat-label>
                    <textarea matInput [(ngModel)]="dataModel.description"
                        [disabled]="!fieldsInfo['description']?.accessAddField" name="dataModel.description"
                        #Description type="text" placeholder="{{fieldsInfo['description']?.fieldTitle}}" row="10"
                        minlength="3" maxlength="100" required></textarea>
                    <mat-icon matSuffix *ngIf="dataModel.description && fieldsInfo['description']?.accessAddField"
                        matSuffix mat-icon-button aria-label="Clear"
                        (click)="dataModel.description = ''">close</mat-icon>
                    <mat-icon *ngIf="fieldsInfo['description']?.accessAddField" matSuffix>mode_edit</mat-icon>
                    <mat-hint align="start">
                        <mat-icon matSuffix class="info-field-icon">info</mat-icon>
                        <strong class="info-field-text">{{fieldsInfo['description']?.fieldDescription}}</strong>
                    </mat-hint>
                    <mat-hint align="end">{{ Description.value.length }} / 100</mat-hint>
                    <mat-error *ngIf="Description.errors?.required">
                        {{ fieldsInfo['description']?.fieldDescription }} is <strong>{{'MESSAGE.required' |
                            translate}}</strong>
                    </mat-error>
                </mat-form-field>
                <div *ngIf="formInfo.formSubmitAllow  && !loading?.display" class="ntk-button-row">
                    <button type="button"
                        class="btn font-13 font-600 btn-m m-1 rounded-s shadow-xl border-0 gradient-gray"
                        (click)="onActionBackToParent()">
                        {{'ACTION.BACK' | translate}}
                    </button>
                    <button type="button"
                        class="btn font-13 font-600 btn-m m-1 rounded-s shadow-xl border-0 gradient-blue"
                        [disabled]="!vform.form.valid" matStepperNext>
                        {{'ACTION.NEXT' | translate}}
                    </button>
                </div>
            </mat-step>
            <mat-step label="{{'TITLE.ATTACH_FILES' | translate}}" state="file">
                <p>{{'TITLE.Photos_And_Application_Files' | translate}}</p>
                <!-- LinkMainImageId Field -->
                <div class="mb-3">
                    <img *ngIf="dataModel?.linkMainImageIdSrc?.length>0" style="vertical-align:middle;"
                        class="ntk-hover-zoom" aria-hidden src="{{dataModel.linkMainImageIdSrc | cmsthumbnail}}"
                        height="50" width="50" />
                </div>
                <div class="mb-9">
                    <mat-form-field class="ntk-full-width" *ngIf="fieldsInfo['linkMainImageId']?.accessWatchField">
                        <mat-label
                            (click)="fileManagerOpenForm = true">{{fieldsInfo['linkMainImageId']?.fieldTitle}}</mat-label>
                        <input matInput [(ngModel)]="dataModel.linkMainImageId"
                            [disabled]="!fieldsInfo['linkMainImageId']?.accessAddField" name="dataModel.linkMainImageId"
                            #LinkMainImageId type="text" placeholder="{{'TITLE.Original_File_ID' | translate}}"
                            autocomplete="off" (click)="fileManagerOpenForm = true" />
                        <mat-icon matSuffix
                            *ngIf="dataModel.linkMainImageId && fieldsInfo['linkMainImageId']?.accessAddField" matSuffix
                            mat-icon-button aria-label="Clear"
                            (click)="dataModel.linkMainImageId = null">close</mat-icon>
                        <mat-icon *ngIf="fieldsInfo['linkMainImageId']?.accessAddField" matSuffix
                            (click)="fileManagerOpenForm = true">mode_edit</mat-icon>
                    </mat-form-field>
                    <cms-file-manager (itemSelected)="onActionFileSelectedLinkMainImageId($event)"
                        [language]="appLanguage" [isPopup]="true" [(openForm)]="fileManagerOpenForm"
                        [tree]="fileManagerTree" [openDirectUploadView]="true"
                        [openFilemanagerButtonLabelKey]="'select'" [selectFileType]="selectFileTypeMainImage"
                        [openFilemanagerButtonView]="false"></cms-file-manager>
                </div>
                <!-- LinkMainVideoId Field -->
                <div class="mb-3">
                    <img *ngIf="dataModel?.linkMainVideoIdSrc?.length>0" style="vertical-align:middle;"
                        class="ntk-hover-zoom" aria-hidden src="{{dataModel.linkMainVideoIdSrc | cmsthumbnail}}"
                        height="50" width="50" />
                </div>
                <div class="mb-9">
                    <mat-form-field class="ntk-full-width" *ngIf="fieldsInfo['linkMainVideoId']?.accessWatchField">
                        <mat-label
                            (click)="fileManagerOpenFormVideo = true">{{fieldsInfo['linkMainVideoId']?.fieldTitle}}
                        </mat-label>
                        <input matInput [(ngModel)]="dataModel.linkMainVideoId"
                            [disabled]="!fieldsInfo['linkMainVideoId']?.accessAddField" name="dataModel.linkMainVideoId"
                            #LinkMainVideoId type="text" placeholder="{{'TITLE.Original_File_ID' | translate}}"
                            autocomplete="off" (click)="fileManagerOpenFormVideo = true" />
                        <mat-icon matSuffix
                            *ngIf="dataModel.linkMainVideoId && fieldsInfo['linkMainVideoId']?.accessAddField" matSuffix
                            mat-icon-button aria-label="Clear"
                            (click)="dataModel.linkMainVideoId = null">close</mat-icon>
                        <mat-icon *ngIf="fieldsInfo['linkMainVideoId']?.accessAddField" matSuffix
                            (click)="fileManagerOpenFormVideo = true">mode_edit</mat-icon>
                    </mat-form-field>
                    <cms-file-manager (itemSelected)="onActionFileSelectedLinkMainVideoId($event)"
                        [language]="appLanguage" [isPopup]="true" [(openForm)]="fileManagerOpenFormVideo"
                        [tree]="fileManagerTree" [openDirectUploadView]="true"
                        [openFilemanagerButtonLabelKey]="'select'" [selectFileType]="selectFileTypeMainVideo"
                        [openFilemanagerButtonView]="false"></cms-file-manager>
                </div>
                <div *ngIf="formInfo.formSubmitAllow  && !loading?.display" class="ntk-button-row">
                    <button type="button"
                        class="btn font-13 font-600 btn-m m-1 rounded-s shadow-xl border-0 gradient-teal"
                        matStepperPrevious>
                        {{'ACTION.BEFOR' | translate}}
                    </button>
                    <button type="submit"
                        class="btn font-13 font-600 btn-m m-1 rounded-s shadow-xl border-0 gradient-green"
                        [disabled]="!vform.form.valid">
                        {{'ACTION.SAVE' | translate}}
                    </button>
                </div>
            </mat-step>
        </mat-vertical-stepper>
        <!--end:::::::::::::::::::::::::::::::::::::::::cms-body-->
    </div>
    <div class="ntk-cms-html-card-message">
        <!--begin:::::::::::::::::::::::::::::::::::::::::cms-message-->
        <!--end:::::::::::::::::::::::::::::::::::::::::cms-message-->
    </div>
    <div class="ntk-cms-html-card-footer">
        <!--begin:::::::::::::::::::::::::::::::::::::::::cms-footer-->
        <!--end:::::::::::::::::::::::::::::::::::::::::cms-footer-->
    </div>
</form>
